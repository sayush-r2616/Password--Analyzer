<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Neon Password Guardian ‚Äî Spiral Hanging Ribbons</title>
<style>
  :root{
    --bg: #000;
    --dialog: #023a9b;        /* blue dialog */
    --neonA: #00ffd5;
    --neonB: #ff3ef0;
    --neonC: #ffd800;
    --muted: rgba(255,255,255,0.06);
  }

  html,body{height:100%;margin:0;background:var(--bg);font-family:Inter,Segoe UI,Roboto,system-ui,-apple-system,Arial;color:#dfe;-webkit-font-smoothing:antialiased;overflow:hidden}
  /* canvas covers whole screen behind UI */
  canvas#ribbons { position:fixed; left:0; top:0; width:100%; height:100%; z-index:1; pointer-events:none; mix-blend-mode:screen; }

  /* container */
  .wrap{position:relative; z-index:5; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:20px; box-sizing:border-box;}

  /* card / dialog */
  .card{width:96%; max-width:640px; border-radius:14px; padding:18px; box-shadow:0 20px 80px rgba(0,0,0,0.8); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));}
  .inner{background:var(--dialog); border-radius:10px; padding:22px; color:white; position:relative;}
  h1{margin:0;font-size:22px;color:var(--neonA); text-shadow:0 0 18px rgba(0,255,213,0.06)}
  p.lead{margin:6px 0 16px 0;color:#cfe;font-size:13px}

  /* name and inputs */
  .row{display:flex; gap:12px; align-items:center; width:100%;}
  input[type="text"], input[type="password"]{
    flex:1; padding:16px 56px 16px 14px; border-radius:12px; border:1px solid var(--muted); background:rgba(255,255,255,0.02); color:white; font-size:16px; outline:none;
  }
  input::placeholder{color:rgba(255,255,255,0.35)}
  label.small{font-size:12px;color:#bde; margin-bottom:6px; display:block}

  /* password area */
  .pwd-wrap{position:relative; margin-top:12px}
  .eye-btn{position:absolute; right:56px; top:10px; background:transparent; border:none; color:#fff; cursor:pointer; font-size:18px; padding:6px}
  .indicator{position:absolute; right:16px; top:12px; width:18px; height:18px; border-radius:50%; border:2px solid rgba(255,255,255,0.08); box-shadow:0 8px 18px rgba(0,0,0,0.6); transition:all 220ms ease;}
  .indicator.blink{animation: blink 800ms infinite}
  @keyframes blink{0%{opacity:1}50%{opacity:0.16}100%{opacity:1}}

  /* strength bar */
  .strength-bar{height:12px;border-radius:10px;background:rgba(255,255,255,0.03);overflow:hidden;margin-top:12px}
  .strength-fill{height:100%;width:0%;transition:width 350ms ease; background:linear-gradient(90deg,var(--neonB),var(--neonA))}

  /* tips / checklist */
  .tips{margin-top:12px;font-size:14px;color:#dfe;padding-left:0}
  .tips li{list-style:none;display:flex;gap:10px;align-items:center;margin:8px 0}
  .dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.06);display:inline-block}
  .ok .dot{background:linear-gradient(45deg,var(--neonA),var(--neonB)); box-shadow:0 6px 18px rgba(0,0,0,0.6)}
  .bad .dot{background:#ff6b6b}

  /* result row */
  .result{display:flex;align-items:center;gap:12px;margin-top:12px;padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));font-weight:700}
  .emoji{font-size:30px}

  /* actions */
  .actions{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
  .ok-btn{padding:10px 14px;border-radius:10px;border:none;font-weight:800;cursor:pointer;background:var(--neonA);color:#002}
  .copy-btn{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff; cursor:pointer; font-weight:700}
  .link-btn{background:transparent;border:none;color:#cde;cursor:pointer;font-weight:700}

  /* history */
  .history{margin-top:14px;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;font-size:13px;color:#cde;max-height:140px;overflow:auto}

  /* appreciation modal */
  .modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(0.95);min-width:260px;background:#001630;color:#fff;padding:18px;border-radius:12px;z-index:9999;box-shadow:0 28px 80px rgba(0,0,0,0.8);display:none;text-align:center}
  .modal.show{display:block;animation:pop 220ms ease both}
  @keyframes pop{from{transform:translate(-50%,-50%) scale(.9);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}
  .appreciation{font-family:Impact, 'Arial Black', sans-serif; font-weight:900; font-size:20px; margin-top:8px}

  .warning{margin-top:10px;color:#ff7b7b;font-size:12px}

  /* responsive */
  @media(max-width:520px){
    .card{padding:12px}
    input[type="text"], input[type="password"]{padding:12px 48px 12px 12px;font-size:15px}
    .eye-btn{right:48px}
    .indicator{right:12px;top:10px}
  }
</style>
</head>
<body>
  <!-- Canvas for ribbons (behind the UI) -->
  <canvas id="ribbons"></canvas>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <div class="inner">
        <h1 id="title">Neon Password Guardian üîê</h1>
        <p class="lead">Secure your tomorrow ‚Äî enter your name to start. The ribbon background is decorative and slow-moving.</p>

        <!-- Name -->
        <div>
          <label class="small">Your name</label>
          <div class="row">
            <input id="nameInput" type="text" placeholder="Type your name..." />
            <button id="startBtn" class="ok-btn" style="width:86px">OK</button>
          </div>
        </div>

        <!-- Password area (hidden until name entered) -->
        <div id="pwdArea" style="margin-top:14px;display:none;">
          <label class="small">Enter password</label>
          <div class="pwd-wrap">
            <input id="pwd" type="password" placeholder="Type a password" autocomplete="new-password" />
            <button id="eye" class="eye-btn" aria-label="toggle password">üëÅÔ∏è</button>
            <div id="indicator" class="indicator" title="strength indicator"></div>
          </div>

          <div class="strength-bar" aria-hidden="true"><div id="fill" class="strength-fill"></div></div>

          <div id="result" class="result" style="display:none;">
            <div class="emoji" id="emoji">üôÇ</div>
            <div>
              <div id="resultText" style="font-size:16px;color:#fff;font-weight:800">Strength</div>
              <div id="subText" style="font-size:12px;color:#cde">Tips will appear here</div>
            </div>
          </div>

          <ul class="tips" id="tipsList" aria-live="polite">
            <li id="t_len" class="bad"><span class="dot"></span>At least 10 characters</li>
            <li id="t_upper" class="bad"><span class="dot"></span>Include uppercase letters</li>
            <li id="t_num" class="bad"><span class="dot"></span>Include numbers</li>
            <li id="t_special" class="bad"><span class="dot"></span>Use special characters (!@#$...)</li>
          </ul>

          <div class="actions">
            <button id="okBtn" class="ok-btn">OK</button>
            <button id="copyBtn" class="copy-btn">Copy</button>
            <button id="suggestBtn" class="copy-btn">Suggest Strong</button>
            <button id="downloadBtn" class="copy-btn">Download Attempts</button>
          </div>

          <div style="margin-top:8px">
            <label style="font-size:13px;color:#cde"><input id="storeRaw" type="checkbox"> <span style="color:#fff">Store raw password locally (unsafe!)</span></label>
            <div class="warning">By default the app stores only masked attempts. Storing raw passwords locally is risky. Use only for testing.</div>
          </div>

          <div id="history" class="history" style="display:none;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- appreciation modal -->
  <div id="exitModal" class="modal" role="dialog" aria-modal="true">
    <div style="font-size:16px">Thanks for visiting,</div>
    <div id="appName" style="font-size:13px;color:#bce">Neon Password Guardian</div>
    <div id="appreciationText" class="appreciation">Good job! üîí‚ú®</div>
    <div style="margin-top:8px;font-size:13px;color:#cde">‚ÄúSecure your tomorrow ‚Äî one strong password at a time.‚Äù</div>
    <div style="margin-top:12px"><button id="closeModal" class="ok-btn">Thanks!</button></div>
  </div>

<script>
/* =========================
   Canvas ribbons: hanging spiral swirl effect
   - fast, canvas-based so we can render many tiny ribbons
   - change RIBBON_COUNT for density
   ========================= */
const canvas = document.getElementById('ribbons');
const ctx = canvas.getContext('2d', { alpha: true });

function resizeCanvas(){
  const dpr = window.devicePixelRatio || 1;
  canvas.width = Math.floor(window.innerWidth * dpr);
  canvas.height = Math.floor(window.innerHeight * dpr);
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Particle (ribbon) class
class Ribbon {
  constructor(w, h){
    this.w = w; this.h = h;
    this.reset(true);
  }
  reset(initial=false){
    // start high above screen (negative y)
    this.x = Math.random() * this.w;
    this.y = -Math.random() * this.h - 20;
    this.size = 1 + Math.random() * 2.2; // thickness
    this.length = 10 + Math.random() * 28; // length of piece
    this.speed = 8 + Math.random() * 26; // fall speed px/s (visual scale)
    this.spin = (Math.random() * 1.6 - 0.8); // rotation angular speed
    this.phase = Math.random() * Math.PI * 2; // for spiral
    this.amplitude = 8 + Math.random() * 40; // horizontal spiral amplitude
    // color bright neon
    const palette = [
      [255,0,255], [0,234,255], [57,255,20], [255,7,58],
      [255,238,0], [0,255,153], [255,107,255], [0,170,255], [255,20,147], [255,136,0]
    ];
    const c = palette[Math.floor(Math.random()*palette.length)];
    this.r = c[0]; this.g = c[1]; this.b = c[2];
    this.alpha = 0.85 + Math.random()*0.25;
    // x offset for swirl center (so ribbons swirl around a vertical axis)
    this.centerX = Math.random() * this.w;
    if(initial) this.y = Math.random() * this.h; // scatter initial ribbons in screen
  }
  step(dt){
    // dt seconds
    this.phase += this.spin * dt * 0.6;
    // vertical movement
    this.y += this.speed * dt;
    // horizontal spiral using sin
    this.x = this.centerX + Math.sin((this.y/60) + this.phase) * this.amplitude;
    // if out of bottom, reset
    if(this.y - this.length > this.h + 50) this.reset(false);
  }
  draw(ctx){
    ctx.save();
    ctx.globalCompositeOperation = 'screen';
    // neon glow: draw shadow first
    ctx.shadowColor = `rgba(${this.r},${this.g},${this.b},0.35)`;
    ctx.shadowBlur = 12;
    // gradient for ribbon
    const g = ctx.createLinearGradient(this.x, this.y, this.x, this.y + this.length);
    g.addColorStop(0, `rgba(${this.r},${this.g},${this.b}, ${Math.min(1,this.alpha)})`);
    g.addColorStop(1, `rgba(${this.r},${this.g},${this.b}, ${Math.max(0.12,this.alpha*0.2)})`);
    ctx.fillStyle = g;
    // draw small rounded rect as ribbon fragment
    const w = this.size;
    const h = this.length;
    const px = this.x;
    const py = this.y;
    // rotate slightly based on phase for tilt
    ctx.translate(px, py);
    ctx.rotate(Math.sin(this.phase) * 0.2);
    // rectangle with rounded ends
    ctx.beginPath();
    ctx.moveTo(-w/2, 0);
    ctx.lineTo(w/2, 0);
    ctx.lineTo(w/2, h);
    ctx.lineTo(-w/2, h);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }
}

// Create many ribbons
const RIBBON_COUNT = 600; // change downwards for lower load
const ribbons = [];
function initRibbons(){
  ribbons.length = 0;
  for(let i=0;i<RIBBON_COUNT;i++){
    ribbons.push(new Ribbon(window.innerWidth, window.innerHeight));
  }
}
initRibbons();

// animation loop
let last = performance.now();
function animate(now){
  const dt = Math.max(0.001, (now - last) / 1000);
  last = now;
  ctx.clearRect(0,0, canvas.width, canvas.height);

  // subtle overlay to make ribbons brighter: draw faint radial tint
  // (optional, keeps ribbons visible behind dialog)
  // update and draw ribbons
  for(let r of ribbons){
    r.step(dt);
    r.draw(ctx);
  }
  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

/* =========================
   UI & Password logic
   ========================= */
const nameInput = document.getElementById('nameInput');
const startBtn = document.getElementById('startBtn');
const pwdArea = document.getElementById('pwdArea');
const pwd = document.getElementById('pwd');
const eye = document.getElementById('eye');
const indicator = document.getElementById('indicator');
const fill = document.getElementById('fill');
const result = document.getElementById('result');
const emoji = document.getElementById('emoji');
const resultText = document.getElementById('resultText');
const subText = document.getElementById('subText');
const t_len = document.getElementById('t_len');
const t_upper = document.getElementById('t_upper');
const t_num = document.getElementById('t_num');
const t_special = document.getElementById('t_special');
const okBtn = document.getElementById('okBtn');
const copyBtn = document.getElementById('copyBtn');
const suggestBtn = document.getElementById('suggestBtn');
const downloadBtn = document.getElementById('downloadBtn');
const historyBox = document.getElementById('history');
const storeRaw = document.getElementById('storeRaw');
const exitModal = document.getElementById('exitModal');
const closeModal = document.getElementById('closeModal');
const appreciationText = document.getElementById('appreciationText');

let weakOkCount = Number(localStorage.getItem('weakOkCount') || 0);
let attempts = JSON.parse(localStorage.getItem('attempts_neon') || '[]');

/* Mask helper */
function maskPwd(pw){
  if(!pw) return '';
  if(pw.length <=2) return pw[0] + '*';
  return pw[0] + '*'.repeat(Math.max(1,pw.length-2)) + pw[pw.length-1];
}

/* refresh history */
function refreshHistory(){
  if(attempts.length === 0){ historyBox.style.display='none'; historyBox.innerHTML=''; return; }
  historyBox.style.display='block';
  historyBox.innerHTML = '<div style="font-weight:700;margin-bottom:6px">Recent attempts</div>' +
    attempts.slice(-8).reverse().map(a=>{
      return `<div style="padding:6px 0;border-bottom:1px dashed rgba(255,255,255,0.03)">
        <div style="font-weight:700">${escapeHtml(a.name || 'Guest')}</div>
        <div style="font-size:12px;color:#cde">${a.time} ‚Ä¢ ${a.strength} ‚Ä¢ ${escapeHtml(a.mask)}</div>
      </div>`;
    }).join('');
}
refreshHistory();
function escapeHtml(s){ if(!s) return ''; return String(s).replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* scoring */
function scorePassword(pw){
  const res = {score:0,strength:'Weak', reasons:[]};
  if(pw.length >= 10) res.score++;
  if(/[A-Z]/.test(pw)) res.score++;
  if(/[0-9]/.test(pw)) res.score++;
  if(/[\W_]/.test(pw)) res.score++;

  const lowered = pw.toLowerCase();
  const commons = ['123','password','qwerty','abc','letmein'];
  if(commons.some(c=>lowered.includes(c))){ res.reasons.push('Avoid common patterns (123, abc, qwerty, password)'); }

  if(res.score <= 1) res.strength = 'Weak';
  else if(res.score === 2 || res.score === 3) res.strength = 'Medium';
  else res.strength = 'Strong';
  return res;
}

/* UI update live */
function updateUI(){
  const pwv = pwd.value || '';
  const sc = scorePassword(pwv);

  // checklist
  t_len.className = pwv.length >= 10 ? 'ok' : 'bad';
  t_upper.className = /[A-Z]/.test(pwv) ? 'ok' : 'bad';
  t_num.className = /[0-9]/.test(pwv) ? 'ok' : 'bad';
  t_special.className = /[\W_]/.test(pwv) ? 'ok' : 'bad';

  // bar progress
  const perc = Math.min(100,(sc.score/4)*100);
  // ensure fill element exists; create if not
  let fillEl = document.querySelector('.strength-fill');
  if(fillEl) fillEl.style.width = perc + '%';

  result.style.display = pwv ? 'flex' : 'none';

  if(sc.strength === 'Weak'){
    indicator.style.background = '#ff4d6d';
    indicator.classList.add('blink');
    if(fillEl) fillEl.style.background = 'linear-gradient(90deg,#ff4d6d,#ff8fa0)';
    emoji.textContent = 'üòµ';
    resultText.textContent = 'Weak';
    subText.textContent = sc.reasons.length ? sc.reasons.join(' ‚Ä¢ ') : 'Too simple ‚Äî increase length and complexity';
    appreciationText.style.color = '#ff6b6b';
  } else if(sc.strength === 'Medium'){
    indicator.style.background = '#ffd36b';
    indicator.classList.remove('blink');
    if(fillEl) fillEl.style.background = 'linear-gradient(90deg,#ffd36b,#ffb86b)';
    emoji.textContent = 'üôÇ';
    resultText.textContent = 'Medium';
    subText.textContent = 'Good ‚Äî add length or special characters to improve';
    appreciationText.style.color = '#ffd36b';
  } else {
    indicator.style.background = '#7efc6e';
    indicator.classList.remove('blink');
    if(fillEl) fillEl.style.background = 'linear-gradient(90deg,#7efc6e,#00ffd5)';
    emoji.textContent = 'üöÄ';
    resultText.textContent = 'Strong';
    subText.textContent = 'Excellent ‚Äî strong password!';
    appreciationText.style.color = '#7efc6e';
  }
}

/* toggle visibility */
eye.addEventListener('click', ()=>{
  if(pwd.type === 'password'){ pwd.type = 'text'; eye.textContent='üôà'; }
  else { pwd.type = 'password'; eye.textContent='üëÅÔ∏è'; }
});
pwd.addEventListener('input', updateUI);

/* strong password generator */
function generateStrong(name){
  const n = (name || 'User').trim().split(' ').map(s=>s[0]||'').join('').slice(0,3) || 'U';
  const words = ['Neon','Cyber','Grid','Flux','Byte','Omega','Pixel','Titan','Echo','Nova','Vex'];
  const w = words[Math.floor(Math.random()*words.length)];
  const num = Math.floor(100 + Math.random()*899);
  const sym = ['!','#','@','%','?','&','*'][Math.floor(Math.random()*7)];
  return `${w}${sym}${n}${num}Z`;
}
suggestBtn.addEventListener('click', ()=>{
  const suggested = generateStrong(nameInput.value || 'Guest');
  pwd.value = suggested;
  updateUI();
});

/* copy button */
copyBtn.addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(pwd.value || '');
    copyBtn.textContent = 'Copied ‚úì';
    setTimeout(()=>copyBtn.textContent = 'Copy',1200);
  }catch(e){ alert('Copy failed ‚Äî allow clipboard permission.'); }
});

/* OK click ‚Äî store attempt behaviour */
okBtn.addEventListener('click', ()=>{
  if(!nameInput.value || !nameInput.value.trim()){ alert('Enter your name first'); nameInput.focus(); return; }
  const pwv = pwd.value || '';
  if(!pwv){ alert('Type a password first'); pwd.focus(); return; }
  const sc = scorePassword(pwv);

  if(sc.strength === 'Weak'){
    weakOkCount++;
    localStorage.setItem('weakOkCount', weakOkCount);
  } else {
    weakOkCount = 0;
    localStorage.setItem('weakOkCount', weakOkCount);
  }

  if(weakOkCount >= 5){
    weakOkCount = 0;
    localStorage.setItem('weakOkCount', weakOkCount);
    const sugg = generateStrong(nameInput.value || 'Guest');
    alert('You clicked OK with weak passwords 5 times ‚Äî a strong password is suggested and auto-filled.');
    pwd.value = sugg;
    updateUI();
  }

  const entry = {
    name: nameInput.value,
    time: new Date().toLocaleString(),
    strength: sc.strength,
    mask: storeRaw.checked ? pwv : maskPwd(pwv),
    rawStored: storeRaw.checked ? true : false
  };
  attempts.push(entry);
  if(attempts.length > 500) attempts.shift();
  localStorage.setItem('attempts_neon', JSON.stringify(attempts));
  refreshHistory();

  okBtn.textContent = 'Saved ‚úì';
  setTimeout(()=> okBtn.textContent = 'OK', 900);
});

/* download attempts */
downloadBtn.addEventListener('click', ()=>{
  const dataStr = JSON.stringify(attempts, null, 2);
  const blob = new Blob([dataStr], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'attempts_neon.json';
  a.click();
  URL.revokeObjectURL(url);
});

/* start button */
startBtn.addEventListener('click', ()=>{
  if(!nameInput.value || !nameInput.value.trim()){ alert('Please enter your name'); nameInput.focus(); return; }
  pwdArea.style.display = 'block';
  document.querySelector('.lead').textContent = `Hello, ${nameInput.value.split(' ')[0]} ‚Äî enter a password to test!`;
  pwd.focus();
});

/* Exit appreciation modal */
let exitShown = false;
function showExitModal(){
  if(exitShown) return;
  const name = nameInput.value ? (nameInput.value.split(' ')[0]) : 'Friend';
  const last = attempts.length ? attempts[attempts.length-1] : null;
  let finalMsg = `Good job, ${name}! üîí‚ú®`;
  if(last && last.strength === 'Strong') finalMsg = `Excellent, ${name}! üöÄüîê`;
  else if(last && last.strength === 'Medium') finalMsg = `Good, ${name}! Keep improving. üôÇ`;
  else if(last && last.strength === 'Weak') finalMsg = `Bad, ${name}! Try the suggestions ‚Äî you've got this! üí™`;

  appreciationText.textContent = finalMsg;
  appreciationText.style.fontFamily = 'Impact, Arial Black, sans-serif';
  appreciationText.style.fontWeight = '900';
  exitModal.classList.add('show');
  exitShown = true;
}
closeModal.addEventListener('click', ()=>{ exitModal.classList.remove('show'); });

document.addEventListener('mouseout', (e)=>{
  if(!e.toElement && !e.relatedTarget && e.clientY < 10){ showExitModal(); }
});
document.addEventListener('visibilitychange', ()=>{ if(document.hidden) showExitModal(); });
window.addEventListener('beforeunload', (e)=>{ if(!exitShown) showExitModal(); });

/* UX shortcuts */
nameInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') startBtn.click(); });
pwd.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') okBtn.click(); });

/* init UI */
updateUI();
console.warn('Security note: This demo stores attempts locally in your browser. Do NOT store real/important passwords unless you understand the risks.');
</script>
</body>
</html>
